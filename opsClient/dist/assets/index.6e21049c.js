import{d as b,o as g,q as y,b as t,k as D,K as O,_ as k,r as d,c as L,w as s,D as S,e as B,t as V,L as j,M as G,N as R,j as z,O as H,F as J,x as K,P as Q,a as C,Q as A,R as q,J as N,E as F,S as W}from"./index.eb0908bc.js";var T=b({name:"Delete"});const X={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Y=t("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32V256zm448-64v-64H416v64h192zM224 896h576V256H224v640zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32zm192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32z"},null,-1);function Z(e,a,n,m,c,_){return g(),y("svg",X,[Y])}T.render=Z;T.__file="packages/components/Delete.vue";var x=T,U=b({name:"Plus"});const ee={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},ae=t("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64h352z"},null,-1);function te(e,a,n,m,c,_){return g(),y("svg",ee,[ae])}U.render=te;U.__file="packages/components/Plus.vue";var le=U,P=b({name:"Search"});const oe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},ne=t("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704z"},null,-1);function ue(e,a,n,m,c,_){return g(),y("svg",oe,[ne])}P.render=ue;P.__file="packages/components/Search.vue";var re=P;const se=b({props:{data:{type:Array,default:()=>[]},select:{type:Array,default:()=>[]},showIndex:{type:Boolean,default:!1},showSelection:{type:Boolean,default:!1},showPage:{type:Boolean,default:!0},page:{type:Object,default:()=>({index:1,size:20,total:0})},pageLayout:{type:String,default:"total, sizes, prev, pager, next, jumper"},pageSizes:{type:Array,default:[10,20,50,100]}},setup(e,a){const n=D(null);let m=null;const c=i=>{m?e.page.index=1:(e.page.index=i,a.emit("getTableData"))},_=i=>{m="work",setTimeout(()=>{m=null},100),e.page.size=i,a.emit("getTableData",!0)},o=i=>{a.emit("selection-change",i)};return O(()=>{n.value.doLayout()}),{table:n,handleCurrentChange:c,handleSizeChange:_,handleSelectionChange:o}}}),ie={class:"system-table-box"};function de(e,a,n,m,c,_){const o=d("el-table-column"),i=d("el-table"),h=d("el-pagination");return g(),L("div",ie,[t(i,G(e.$attrs,{ref:"table",class:"system-table",border:"",height:"100%",data:e.data,onSelectionChange:e.handleSelectionChange}),{default:s(()=>[e.showSelection?(g(),y(o,{key:0,type:"selection",align:"center",width:"50"})):S("",!0),e.showIndex?(g(),y(o,{key:1,label:"\u5E8F\u53F7",width:"60",align:"center"},{default:s(f=>[B(V((e.page.index-1)*e.page.size+f.$index+1),1)]),_:1})):S("",!0),j(e.$slots,"default",{},void 0,!0)]),_:3},16,["data","onSelectionChange"]),e.showPage?(g(),y(h,{key:0,"current-page":e.page.index,"onUpdate:currentPage":a[0]||(a[0]=f=>e.page.index=f),class:"system-page",background:"",layout:e.pageLayout,total:e.page.total,"page-size":e.page.size,"page-sizes":e.pageSizes,onCurrentChange:e.handleCurrentChange,onSizeChange:e.handleSizeChange},null,8,["current-page","layout","total","page-size","page-sizes","onCurrentChange","onSizeChange"])):S("",!0)])}var pe=k(se,[["render",de],["__scopeId","data-v-2e065fc7"]]);const me=b({components:{Layer:R},props:{layer:{type:Object,default:()=>({show:!1,title:"",showButton:!0})}},setup(e,a){return{ruleForm:z({name:"",username:"",role:"",password:""}),rules:{name:[{required:!0,message:"\u8BF7\u8F93\u5165\u59D3\u540D",trigger:"blur"}],username:[{required:!0,message:"\u8BF7\u8F93\u5165\u767B\u5F55\u540D",trigger:"blur"}],role:[{required:!0,message:"\u8BF7\u9009\u62E9",trigger:"blur"}]},roleOptions:[{value:"user",label:"\u7528\u6237"},{value:"admin",label:"\u7BA1\u7406\u5458"},{value:"SuperAdmin",label:"\u8D85\u7EA7\u7BA1\u7406\u5458"}]}},methods:{submit(){this.$refs.form.validate(e=>{if(e){let a=this.ruleForm;this.layer.row?this.updateForm(a):(a.password=a.username+"@1234",this.addForm(a))}else return!1})},addForm(e){H(e).then(a=>{this.$message({type:"success",message:"\u65B0\u589E\u6210\u529F"}),this.layer.show=!1,this.$emit("getData")})},updateForm(e){}}});function ce(e,a,n,m,c,_){const o=d("el-input"),i=d("el-form-item"),h=d("el-option"),f=d("el-select"),w=d("el-form"),$=d("Layer",!0);return g(),y($,{layer:e.layer,onConfirm:e.submit},{default:s(()=>[t(w,{model:e.ruleForm,rules:e.rules,ref:"form","label-width":"120px",style:{"margin-right":"30px"}},{default:s(()=>[t(i,{label:"\u59D3\u540D\uFF1A",prop:"name"},{default:s(()=>[t(o,{modelValue:e.ruleForm.name,"onUpdate:modelValue":a[0]||(a[0]=p=>e.ruleForm.name=p),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1}),t(i,{label:"\u767B\u5F55\u540D\uFF1A",prop:"username"},{default:s(()=>[t(o,{modelValue:e.ruleForm.username,"onUpdate:modelValue":a[1]||(a[1]=p=>e.ruleForm.username=p),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"},null,8,["modelValue"])]),_:1}),t(i,{label:"\u89D2\u8272\uFF1A",prop:"role"},{default:s(()=>[t(f,{modelValue:e.ruleForm.role,"onUpdate:modelValue":a[2]||(a[2]=p=>e.ruleForm.role=p),placeholder:"\u9009\u62E9\u89D2\u8272",clearable:"",filterable:"","allow-create":"","default-first-option":"","reserve-keyword":!1},{default:s(()=>[(g(!0),L(J,null,K(e.roleOptions,p=>(g(),y(h,{key:p.value,label:p.label,value:p.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(i,{label:"\u5BC6\u7801\uFF1A"},{default:s(()=>[t(o,{modelValue:e.ruleForm.password,"onUpdate:modelValue":a[3]||(a[3]=p=>e.ruleForm.password=p),autocomplete:"off",disabled:!0},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["layer","onConfirm"])}var ge=k(me,[["render",ce]]);const he=b({components:{Table:pe,Layer:ge},setup(){const e=z({input:""}),a=z({show:!1,title:"\u65B0\u589E",showButton:!0}),n=z({index:1,size:20,total:0}),m=D(!0),c=D([]),_=D([]),o=D([]),i=l=>{_.value=l},h=l=>{l&&(n.index=1),c.value=[],e.input?o.value.forEach(v=>{for(let r in v)v[r]==e.input&&c.value.push(v)}):o.value.forEach((v,r)=>{let I=(n.index-1)*n.size,M=(n.index-1)*n.size+n.size-1;r>=I&&r<=M&&c.value.push(v)})},f=()=>{m.value=!0,o.value=[],N({type:"info"}).then(v=>{let r=v.data;r.myState=="success"?(o.value=r.myDesc,n.total=Number(o.value.length),h(!0),o.value.length==0&&F({message:"\u6CA1\u6709\u7B26\u5408\u6761\u4EF6\u7684\u6570\u636E\uFF01\uFF01\uFF01",type:"error"})):(F({message:"\u67E5\u8BE2\u5931\u8D25\uFF0C\u539F\u56E0\uFF1A"+r.myDesc,type:"error"}),console.log("res:",r))}).catch(v=>{c.value=[],o.value=[],n.index=1,n.total=0}).finally(()=>{m.value=!1})},w=l=>{W({username:l}).then(r=>{F({type:"success",message:"\u91CD\u7F6E\u6210\u529F\uFF0C\u65B0\u5BC6\u7801\uFF1A"+r.data.message})})},$=l=>{let v={name:l.name,username:l.username,password:l.username+"@1234",level:"tester",team:"\u6D4B\u8BD5\u5916\u5305"};H(v).then(r=>{F({type:"success",message:"\u6CE8\u518C\u6210\u529F"}),f()}).catch(r=>{F({type:"error",message:"\u6CE8\u518C\u5931\u8D25\uFF1A"+r})})},p=()=>{a.title="\u65B0\u589E\u6570\u636E",a.show=!0,delete a.row},E=l=>{a.title="\u7F16\u8F91\u6570\u636E",a.row=l,a.show=!0},u=l=>{if(!l.username)return;l.loading=!0,N({type:"is_active",row:l}).then(r=>{r.data.myState=="success"?(F({type:"success",message:"\u72B6\u6001\u53D8\u66F4\u6210\u529F"}),f()):F({type:"error",message:"\u72B6\u6001\u53D8\u66F4\u5931\u8D25\uFF1A"+r.data.myDesc})}).catch(r=>{F({type:"error",message:"\u72B6\u6001\u53D8\u66F4\u5931\u8D25"})}).finally(()=>{l.loading=!1})};return f(),{Plus:le,Delete:x,Search:re,query:e,tableData:c,chooseData:_,loading:m,page:n,layer:a,handleSelectionChange:i,getTableData:h,handleReset:w,handleAdd:p,handleEdit:E,handleUpdateStatus:u,handleLogon:$,getData:f}}}),fe={class:"layout-container"},ve={class:"layout-container-form flex space-between"},_e={class:"layout-container-form-handle"},ye={class:"layout-container-form-search"},Fe={class:"layout-container-table"},be={class:"statusName"};function we(e,a,n,m,c,_){const o=d("el-button"),i=d("el-input"),h=d("el-table-column"),f=d("el-switch"),w=d("el-popconfirm"),$=d("Table"),p=d("Layer"),E=Q("loading");return g(),L("div",fe,[C("div",ve,[C("div",_e,[t(o,{type:"primary",icon:e.Plus,onClick:e.handleAdd},{default:s(()=>[B(V(e.$t("message.common.add")),1)]),_:1},8,["icon","onClick"])]),C("div",ye,[t(i,{modelValue:e.query.input,"onUpdate:modelValue":a[0]||(a[0]=u=>e.query.input=u),placeholder:e.$t("message.common.searchTip")},null,8,["modelValue","placeholder"]),t(o,{type:"primary",icon:e.Search,class:"search-btn",onClick:a[1]||(a[1]=u=>e.getTableData(!0))},{default:s(()=>[B(V(e.$t("message.common.search")),1)]),_:1},8,["icon"])])]),C("div",Fe,[A((g(),y($,{ref:"table",page:e.page,"onUpdate:page":a[2]||(a[2]=u=>e.page=u),showSelection:!1,data:e.tableData,showIndex:!0,onGetTableData:e.getTableData,onSelectionChange:e.handleSelectionChange},{default:s(()=>[t(h,{prop:"username",label:"\u7528\u6237\u540D",align:"center"}),t(h,{prop:"name",label:"\u6635\u79F0",align:"center"}),t(h,{prop:"role",label:"\u89D2\u8272",align:"center"}),t(h,{prop:"is_active",label:"\u72B6\u6001",align:"center"},{default:s(u=>[C("span",be,V(u.row.is_active===1?"\u542F\u7528":"\u7981\u7528"),1),t(f,{modelValue:u.row.is_active,"onUpdate:modelValue":l=>u.row.is_active=l,"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0,loading:u.row.loading,onChange:l=>e.handleUpdateStatus(u.row)},null,8,["modelValue","onUpdate:modelValue","loading","onChange"])]),_:1}),t(h,{label:e.$t("message.common.handle"),align:"center",fixed:"right",width:"200"},{default:s(u=>[A(t(o,{onClick:l=>e.handleLogon(u.row)},{default:s(()=>[B("\u6CE8\u518C")]),_:2},1032,["onClick"]),[[q,!u.row.role]]),t(w,{title:u.row.name,onConfirm:l=>e.handleReset(u.row.username)},{reference:s(()=>[A(t(o,{type:"danger"},{default:s(()=>[B("\u91CD\u7F6E")]),_:2},1536),[[q,u.row.role]])]),_:2},1032,["title","onConfirm"])]),_:1},8,["label"])]),_:1},8,["page","data","onGetTableData","onSelectionChange"])),[[E,e.loading]]),e.layer.show?(g(),y(p,{key:0,layer:e.layer,onGetData:e.getData},null,8,["layer","onGetData"])):S("",!0)])])}var Ce=k(he,[["render",we],["__scopeId","data-v-1187f136"]]);export{Ce as default};
